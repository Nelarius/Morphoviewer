var glMatrix={};glMatrix.EPSILON=1e-6,glMatrix.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,glMatrix.RANDOM=Math.random,glMatrix.ENABLE_SIMD=!1,glMatrix.SIMD_AVAILABLE=glMatrix.ARRAY_TYPE===Float32Array&&"SIMD"in this,glMatrix.USE_SIMD=glMatrix.ENABLE_SIMD&&glMatrix.SIMD_AVAILABLE,glMatrix.setMatrixArrayType=function(t){glMatrix.ARRAY_TYPE=t};var degree=Math.PI/180;glMatrix.toRadian=function(t){return t*degree};var vec2={};vec2.create=function(){var t=new glMatrix.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},vec2.clone=function(t){var a=new glMatrix.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},vec2.fromValues=function(t,a){var r=new glMatrix.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},vec2.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},vec2.set=function(t,a,r){return t[0]=a,t[1]=r,t},vec2.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},vec2.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},vec2.sub=vec2.subtract,vec2.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},vec2.mul=vec2.multiply,vec2.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},vec2.div=vec2.divide,vec2.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},vec2.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},vec2.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},vec2.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},vec2.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},vec2.dist=vec2.distance,vec2.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},vec2.sqrDist=vec2.squaredDistance,vec2.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},vec2.len=vec2.length,vec2.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},vec2.sqrLen=vec2.squaredLength,vec2.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},vec2.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},vec2.normalize=function(t,a){var r=a[0],n=a[1],e=r*r+n*n;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},vec2.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},vec2.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},vec2.lerp=function(t,a,r,n){var e=a[0],o=a[1];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t},vec2.random=function(t,a){a=a||1;var r=2*glMatrix.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},vec2.transformMat2=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},vec2.transformMat2d=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},vec2.transformMat3=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},vec2.transformMat4=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},vec2.forEach=function(){var t=vec2.create();return function(a,r,n,e,o,l){var u,M;for(r||(r=2),n||(n=0),M=e?Math.min(e*r+n,a.length):a.length,u=n;M>u;u+=r)t[0]=a[u],t[1]=a[u+1],o(t,t,l),a[u]=t[0],a[u+1]=t[1];return a}}(),vec2.str=function(t){return"vec2("+t[0]+", "+t[1]+")"};var vec3={};vec3.create=function(){var t=new glMatrix.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},vec3.clone=function(t){var a=new glMatrix.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},vec3.fromValues=function(t,a,r){var n=new glMatrix.ARRAY_TYPE(3);return n[0]=t,n[1]=a,n[2]=r,n},vec3.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},vec3.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},vec3.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},vec3.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},vec3.sub=vec3.subtract,vec3.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},vec3.mul=vec3.multiply,vec3.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},vec3.div=vec3.divide,vec3.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},vec3.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},vec3.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},vec3.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},vec3.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(r*r+n*n+e*e)},vec3.dist=vec3.distance,vec3.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return r*r+n*n+e*e},vec3.sqrDist=vec3.squaredDistance,vec3.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},vec3.len=vec3.length,vec3.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},vec3.sqrLen=vec3.squaredLength,vec3.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},vec3.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},vec3.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=r*r+n*n+e*e;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},vec3.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},vec3.cross=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],M=r[2];return t[0]=e*M-o*u,t[1]=o*l-n*M,t[2]=n*u-e*l,t},vec3.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t},vec3.hermite=function(t,a,r,n,e,o){var l=o*o,u=l*(2*o-3)+1,M=l*(o-2)+o,c=l*(o-1),i=l*(3-2*o);return t[0]=a[0]*u+r[0]*M+n[0]*c+e[0]*i,t[1]=a[1]*u+r[1]*M+n[1]*c+e[1]*i,t[2]=a[2]*u+r[2]*M+n[2]*c+e[2]*i,t},vec3.bezier=function(t,a,r,n,e,o){var l=1-o,u=l*l,M=o*o,c=u*l,i=3*o*u,s=3*M*l,x=M*o;return t[0]=a[0]*c+r[0]*i+n[0]*s+e[0]*x,t[1]=a[1]*c+r[1]*i+n[1]*s+e[1]*x,t[2]=a[2]*c+r[2]*i+n[2]*s+e[2]*x,t},vec3.random=function(t,a){a=a||1;var r=2*glMatrix.RANDOM()*Math.PI,n=2*glMatrix.RANDOM()-1,e=Math.sqrt(1-n*n)*a;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t[2]=n*a,t},vec3.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[3]*n+r[7]*e+r[11]*o+r[15];return l=l||1,t[0]=(r[0]*n+r[4]*e+r[8]*o+r[12])/l,t[1]=(r[1]*n+r[5]*e+r[9]*o+r[13])/l,t[2]=(r[2]*n+r[6]*e+r[10]*o+r[14])/l,t},vec3.transformMat3=function(t,a,r){var n=a[0],e=a[1],o=a[2];return t[0]=n*r[0]+e*r[3]+o*r[6],t[1]=n*r[1]+e*r[4]+o*r[7],t[2]=n*r[2]+e*r[5]+o*r[8],t},vec3.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],M=r[2],c=r[3],i=c*n+u*o-M*e,s=c*e+M*n-l*o,x=c*o+l*e-u*n,m=-l*n-u*e-M*o;return t[0]=i*c+m*-l+s*-M-x*-u,t[1]=s*c+m*-u+x*-l-i*-M,t[2]=x*c+m*-M+i*-u-s*-l,t},vec3.rotateX=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),o[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.rotateY=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),o[1]=e[1],o[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.rotateZ=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),o[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},vec3.forEach=function(){var t=vec3.create();return function(a,r,n,e,o,l){var u,M;for(r||(r=3),n||(n=0),M=e?Math.min(e*r+n,a.length):a.length,u=n;M>u;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],o(t,t,l),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2];return a}}(),vec3.angle=function(t,a){var r=vec3.fromValues(t[0],t[1],t[2]),n=vec3.fromValues(a[0],a[1],a[2]);vec3.normalize(r,r),vec3.normalize(n,n);var e=vec3.dot(r,n);return e>1?0:Math.acos(e)},vec3.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"};var vec4={};vec4.create=function(){var t=new glMatrix.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},vec4.clone=function(t){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},vec4.fromValues=function(t,a,r,n){var e=new glMatrix.ARRAY_TYPE(4);return e[0]=t,e[1]=a,e[2]=r,e[3]=n,e},vec4.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},vec4.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},vec4.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},vec4.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},vec4.sub=vec4.subtract,vec4.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},vec4.mul=vec4.multiply,vec4.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},vec4.div=vec4.divide,vec4.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},vec4.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},vec4.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},vec4.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},vec4.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+n*n+e*e+o*o)},vec4.dist=vec4.distance,vec4.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return r*r+n*n+e*e+o*o},vec4.sqrDist=vec4.squaredDistance,vec4.length=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return Math.sqrt(a*a+r*r+n*n+e*e)},vec4.len=vec4.length,vec4.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return a*a+r*r+n*n+e*e},vec4.sqrLen=vec4.squaredLength,vec4.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},vec4.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},vec4.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o;return l>0&&(l=1/Math.sqrt(l),t[0]=r*l,t[1]=n*l,t[2]=e*l,t[3]=o*l),t},vec4.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},vec4.lerp=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=l+n*(r[2]-l),t[3]=u+n*(r[3]-u),t},vec4.random=function(t,a){return a=a||1,t[0]=glMatrix.RANDOM(),t[1]=glMatrix.RANDOM(),t[2]=glMatrix.RANDOM(),t[3]=glMatrix.RANDOM(),vec4.normalize(t,t),vec4.scale(t,t,a),t},vec4.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3];return t[0]=r[0]*n+r[4]*e+r[8]*o+r[12]*l,t[1]=r[1]*n+r[5]*e+r[9]*o+r[13]*l,t[2]=r[2]*n+r[6]*e+r[10]*o+r[14]*l,t[3]=r[3]*n+r[7]*e+r[11]*o+r[15]*l,t},vec4.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=r[0],u=r[1],M=r[2],c=r[3],i=c*n+u*o-M*e,s=c*e+M*n-l*o,x=c*o+l*e-u*n,m=-l*n-u*e-M*o;return t[0]=i*c+m*-l+s*-M-x*-u,t[1]=s*c+m*-u+x*-l-i*-M,t[2]=x*c+m*-M+i*-u-s*-l,t[3]=a[3],t},vec4.forEach=function(){var t=vec4.create();return function(a,r,n,e,o,l){var u,M;for(r||(r=4),n||(n=0),M=e?Math.min(e*r+n,a.length):a.length,u=n;M>u;u+=r)t[0]=a[u],t[1]=a[u+1],t[2]=a[u+2],t[3]=a[u+3],o(t,t,l),a[u]=t[0],a[u+1]=t[1],a[u+2]=t[2],a[u+3]=t[3];return a}}(),vec4.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var mat2d={};mat2d.create=function(){var t=new glMatrix.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},mat2d.clone=function(t){var a=new glMatrix.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},mat2d.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},mat2d.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},mat2d.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=r*o-n*e;return M?(M=1/M,t[0]=o*M,t[1]=-n*M,t[2]=-e*M,t[3]=r*M,t[4]=(e*u-o*l)*M,t[5]=(n*l-r*u)*M,t):null},mat2d.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},mat2d.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=r[0],i=r[1],s=r[2],x=r[3],m=r[4],v=r[5];return t[0]=n*c+o*i,t[1]=e*c+l*i,t[2]=n*s+o*x,t[3]=e*s+l*x,t[4]=n*m+o*v+u,t[5]=e*m+l*v+M,t},mat2d.mul=mat2d.multiply,mat2d.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=Math.sin(r),i=Math.cos(r);return t[0]=n*i+o*c,t[1]=e*i+l*c,t[2]=n*-c+o*i,t[3]=e*-c+l*i,t[4]=u,t[5]=M,t},mat2d.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=r[0],i=r[1];return t[0]=n*c,t[1]=e*c,t[2]=o*i,t[3]=l*i,t[4]=u,t[5]=M,t},mat2d.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=r[0],i=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=n*c+o*i+u,t[5]=e*c+l*i+M,t},mat2d.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},mat2d.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},mat2d.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},mat2d.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},mat2d.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var mat2={};mat2.create=function(){var t=new glMatrix.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},mat2.clone=function(t){var a=new glMatrix.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},mat2.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},mat2.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},mat2.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},mat2.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*o-e*n;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-e*l,t[3]=r*l,t):null},mat2.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},mat2.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},mat2.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],M=r[1],c=r[2],i=r[3];return t[0]=n*u+o*M,t[1]=e*u+l*M,t[2]=n*c+o*i,t[3]=e*c+l*i,t},mat2.mul=mat2.multiply,mat2.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),M=Math.cos(r);return t[0]=n*M+o*u,t[1]=e*M+l*u,t[2]=n*-u+o*M,t[3]=e*-u+l*M,t},mat2.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],M=r[1];return t[0]=n*u,t[1]=e*u,t[2]=o*M,t[3]=l*M,t},mat2.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},mat2.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},mat2.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},mat2.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},mat2.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]};var mat4={scalar:{},SIMD:{}};mat4.create=function(){var t=new glMatrix.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.clone=function(t){var a=new glMatrix.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},mat4.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},mat4.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],l=a[7],u=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=l,t[14]=u}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},mat4.SIMD.transpose=function(t,a){var r,n,e,o,l,u,M,c,i,s;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),M=SIMD.Float32x4.shuffle(l,u,0,2,4,6),c=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,0,M),SIMD.Float32x4.store(t,4,c),l=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(e,o,2,3,6,7),i=SIMD.Float32x4.shuffle(l,u,0,2,4,6),s=SIMD.Float32x4.shuffle(l,u,1,3,5,7),SIMD.Float32x4.store(t,8,i),SIMD.Float32x4.store(t,12,s),t},mat4.transpose=glMatrix.USE_SIMD?mat4.SIMD.transpose:mat4.scalar.transpose,mat4.scalar.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=a[6],c=a[7],i=a[8],s=a[9],x=a[10],m=a[11],v=a[12],D=a[13],S=a[14],I=a[15],f=r*u-n*l,F=r*M-e*l,h=r*c-o*l,d=n*M-e*u,z=n*c-o*u,w=e*c-o*M,g=i*D-s*v,p=i*S-x*v,q=i*I-m*v,A=s*S-x*D,R=s*I-m*D,b=x*I-m*S,Y=f*b-F*R+h*A+d*q-z*p+w*g;return Y?(Y=1/Y,t[0]=(u*b-M*R+c*A)*Y,t[1]=(e*R-n*b-o*A)*Y,t[2]=(D*w-S*z+I*d)*Y,t[3]=(x*z-s*w-m*d)*Y,t[4]=(M*q-l*b-c*p)*Y,t[5]=(r*b-e*q+o*p)*Y,t[6]=(S*h-v*w-I*F)*Y,t[7]=(i*w-x*h+m*F)*Y,t[8]=(l*R-u*q+c*g)*Y,t[9]=(n*q-r*R-o*g)*Y,t[10]=(v*z-D*h+I*f)*Y,t[11]=(s*h-i*z-m*f)*Y,t[12]=(u*p-l*A-M*g)*Y,t[13]=(r*A-n*p+e*g)*Y,t[14]=(D*F-v*d-S*f)*Y,t[15]=(i*d-s*F+x*f)*Y,t):null},mat4.SIMD.invert=function(t,a){var r,n,e,o,l,u,M,c,i,s,x=SIMD.Float32x4.load(a,0),m=SIMD.Float32x4.load(a,4),v=SIMD.Float32x4.load(a,8),D=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(x,m,0,1,4,5),n=SIMD.Float32x4.shuffle(v,D,0,1,4,5),r=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(x,m,2,3,6,7),o=SIMD.Float32x4.shuffle(v,D,2,3,6,7),e=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.mul(n,l),M=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),u),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),l=SIMD.Float32x4.mul(n,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),i=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),u),c=SIMD.Float32x4.mul(r,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(e,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(r,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),c),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),i),l=SIMD.Float32x4.swizzle(l,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),c),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(e,l)),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(e,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,l),M),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(r,e),l=SIMD.Float32x4.swizzle(l,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),M),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(o,l)),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),i),s=SIMD.Float32x4.mul(r,u),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,2,3,0,1),s),s=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(s,1,0,3,2),s),l=SIMD.Float32x4.reciprocalApproximation(s),s=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(s,SIMD.Float32x4.mul(l,l))),(s=SIMD.Float32x4.swizzle(s,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(s,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(s,M)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(s,c)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(s,i)),t):null},mat4.invert=glMatrix.USE_SIMD?mat4.SIMD.invert:mat4.scalar.invert,mat4.scalar.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=a[6],c=a[7],i=a[8],s=a[9],x=a[10],m=a[11],v=a[12],D=a[13],S=a[14],I=a[15];return t[0]=u*(x*I-m*S)-s*(M*I-c*S)+D*(M*m-c*x),t[1]=-(n*(x*I-m*S)-s*(e*I-o*S)+D*(e*m-o*x)),t[2]=n*(M*I-c*S)-u*(e*I-o*S)+D*(e*c-o*M),t[3]=-(n*(M*m-c*x)-u*(e*m-o*x)+s*(e*c-o*M)),t[4]=-(l*(x*I-m*S)-i*(M*I-c*S)+v*(M*m-c*x)),t[5]=r*(x*I-m*S)-i*(e*I-o*S)+v*(e*m-o*x),t[6]=-(r*(M*I-c*S)-l*(e*I-o*S)+v*(e*c-o*M)),t[7]=r*(M*m-c*x)-l*(e*m-o*x)+i*(e*c-o*M),t[8]=l*(s*I-m*D)-i*(u*I-c*D)+v*(u*m-c*s),t[9]=-(r*(s*I-m*D)-i*(n*I-o*D)+v*(n*m-o*s)),t[10]=r*(u*I-c*D)-l*(n*I-o*D)+v*(n*c-o*u),t[11]=-(r*(u*m-c*s)-l*(n*m-o*s)+i*(n*c-o*u)),t[12]=-(l*(s*S-x*D)-i*(u*S-M*D)+v*(u*x-M*s)),t[13]=r*(s*S-x*D)-i*(n*S-e*D)+v*(n*x-e*s),t[14]=-(r*(u*S-M*D)-l*(n*S-e*D)+v*(n*M-e*u)),t[15]=r*(u*x-M*s)-l*(n*x-e*s)+i*(n*M-e*u),t},mat4.SIMD.adjoint=function(t,a){var r,n,e,o,l,u,M,c,i,s,x,m,v,r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(r,n,0,1,4,5),u=SIMD.Float32x4.shuffle(e,o,0,1,4,5),l=SIMD.Float32x4.shuffle(i,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,i,1,3,5,7),i=SIMD.Float32x4.shuffle(r,n,2,3,6,7),c=SIMD.Float32x4.shuffle(e,o,2,3,6,7),M=SIMD.Float32x4.shuffle(i,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,i,1,3,5,7),i=SIMD.Float32x4.mul(M,c),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.mul(u,i),x=SIMD.Float32x4.mul(l,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,i),s),x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,i),x),x=SIMD.Float32x4.swizzle(x,2,3,0,1),i=SIMD.Float32x4.mul(u,M),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,i),s),v=SIMD.Float32x4.mul(l,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(c,i)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,i),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),c),i=SIMD.Float32x4.swizzle(i,1,0,3,2),M=SIMD.Float32x4.swizzle(M,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(M,i),s),m=SIMD.Float32x4.mul(l,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(M,i)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,i),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),i=SIMD.Float32x4.mul(l,u),i=SIMD.Float32x4.swizzle(i,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,i),m),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(M,i),v),i=SIMD.Float32x4.swizzle(i,2,3,0,1),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,i),m),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(M,i)),i=SIMD.Float32x4.mul(l,c),i=SIMD.Float32x4.swizzle(i,1,0,3,2),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(M,i)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,i),m),i=SIMD.Float32x4.swizzle(i,2,3,0,1),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(M,i),x),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(u,i)),i=SIMD.Float32x4.mul(l,M),i=SIMD.Float32x4.swizzle(i,1,0,3,2),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,i),x),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(u,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(c,i)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,i),v),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,x),SIMD.Float32x4.store(t,8,m),SIMD.Float32x4.store(t,12,v),t},mat4.adjoint=glMatrix.USE_SIMD?mat4.SIMD.adjoint:mat4.scalar.adjoint,mat4.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],M=t[7],c=t[8],i=t[9],s=t[10],x=t[11],m=t[12],v=t[13],D=t[14],S=t[15],I=a*l-r*o,f=a*u-n*o,F=a*M-e*o,h=r*u-n*l,d=r*M-e*l,z=n*M-e*u,w=c*v-i*m,g=c*D-s*m,p=c*S-x*m,q=i*D-s*v,A=i*S-x*v,R=s*S-x*D;return I*R-f*A+F*q+h*p-d*g+z*w},mat4.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4.load(r,0),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),l))));SIMD.Float32x4.store(t,0,M);var c=SIMD.Float32x4.load(r,4),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),l))));SIMD.Float32x4.store(t,4,i);var s=SIMD.Float32x4.load(r,8),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),l))));SIMD.Float32x4.store(t,8,x);var m=SIMD.Float32x4.load(r,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,3,3,3,3),l))));return SIMD.Float32x4.store(t,12,v),t},mat4.scalar.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=a[6],i=a[7],s=a[8],x=a[9],m=a[10],v=a[11],D=a[12],S=a[13],I=a[14],f=a[15],F=r[0],h=r[1],d=r[2],z=r[3];return t[0]=F*n+h*u+d*s+z*D,t[1]=F*e+h*M+d*x+z*S,t[2]=F*o+h*c+d*m+z*I,t[3]=F*l+h*i+d*v+z*f,F=r[4],h=r[5],d=r[6],z=r[7],t[4]=F*n+h*u+d*s+z*D,t[5]=F*e+h*M+d*x+z*S,t[6]=F*o+h*c+d*m+z*I,t[7]=F*l+h*i+d*v+z*f,F=r[8],h=r[9],d=r[10],z=r[11],t[8]=F*n+h*u+d*s+z*D,t[9]=F*e+h*M+d*x+z*S,t[10]=F*o+h*c+d*m+z*I,t[11]=F*l+h*i+d*v+z*f,F=r[12],h=r[13],d=r[14],z=r[15],t[12]=F*n+h*u+d*s+z*D,t[13]=F*e+h*M+d*x+z*S,t[14]=F*o+h*c+d*m+z*I,t[15]=F*l+h*i+d*v+z*f,t},mat4.multiply=glMatrix.USE_SIMD?mat4.SIMD.multiply:mat4.scalar.multiply,mat4.mul=mat4.multiply,mat4.scalar.translate=function(t,a,r){var n,e,o,l,u,M,c,i,s,x,m,v,D=r[0],S=r[1],I=r[2];return a===t?(t[12]=a[0]*D+a[4]*S+a[8]*I+a[12],t[13]=a[1]*D+a[5]*S+a[9]*I+a[13],t[14]=a[2]*D+a[6]*S+a[10]*I+a[14],t[15]=a[3]*D+a[7]*S+a[11]*I+a[15]):(n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=a[6],i=a[7],s=a[8],x=a[9],m=a[10],v=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=M,t[6]=c,t[7]=i,t[8]=s,t[9]=x,t[10]=m,t[11]=v,t[12]=n*D+u*S+s*I+a[12],t[13]=e*D+M*S+x*I+a[13],t[14]=o*D+c*S+m*I+a[14],t[15]=l*D+i*S+v*I+a[15]),t},mat4.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),u=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var M=SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,l)));return SIMD.Float32x4.store(t,12,M),t},mat4.translate=glMatrix.USE_SIMD?mat4.SIMD.translate:mat4.scalar.translate,mat4.scalar.scale=function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},mat4.SIMD.scale=function(t,a,r){var n,e,o,l=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(l,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(l,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},mat4.scale=glMatrix.USE_SIMD?mat4.SIMD.scale:mat4.scalar.scale,mat4.rotate=function(t,a,r,n){var e,o,l,u,M,c,i,s,x,m,v,D,S,I,f,F,h,d,z,w,g,p,q,A,R=n[0],b=n[1],Y=n[2],E=Math.sqrt(R*R+b*b+Y*Y);return Math.abs(E)<glMatrix.EPSILON?null:(E=1/E,R*=E,b*=E,Y*=E,e=Math.sin(r),o=Math.cos(r),l=1-o,u=a[0],M=a[1],c=a[2],i=a[3],s=a[4],x=a[5],m=a[6],v=a[7],D=a[8],S=a[9],I=a[10],f=a[11],F=R*R*l+o,h=b*R*l+Y*e,d=Y*R*l-b*e,z=R*b*l-Y*e,w=b*b*l+o,g=Y*b*l+R*e,p=R*Y*l+b*e,q=b*Y*l-R*e,A=Y*Y*l+o,t[0]=u*F+s*h+D*d,t[1]=M*F+x*h+S*d,t[2]=c*F+m*h+I*d,t[3]=i*F+v*h+f*d,t[4]=u*z+s*w+D*g,t[5]=M*z+x*w+S*g,t[6]=c*z+m*w+I*g,t[7]=i*z+v*w+f*g,t[8]=u*p+s*q+D*A,t[9]=M*p+x*q+S*A,t[10]=c*p+m*q+I*A,t[11]=i*p+v*q+f*A,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},mat4.rotateX=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],l=a[5],u=a[6],M=a[7],c=a[8],i=a[9],s=a[10],x=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+c*n,t[5]=l*e+i*n,t[6]=u*e+s*n,t[7]=M*e+x*n,t[8]=c*e-o*n,t[9]=i*e-l*n,t[10]=s*e-u*n,t[11]=x*e-M*n,t},mat4.rotateY=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],M=a[3],c=a[8],i=a[9],s=a[10],x=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-c*n,t[1]=l*e-i*n,t[2]=u*e-s*n,t[3]=M*e-x*n,t[8]=o*n+c*e,t[9]=l*n+i*e,t[10]=u*n+s*e,t[11]=M*n+x*e,t},mat4.rotateZ=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],l=a[1],u=a[2],M=a[3],c=a[4],i=a[5],s=a[6],x=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+c*n,t[1]=l*e+i*n,t[2]=u*e+s*n,t[3]=M*e+x*n,t[4]=c*e-o*n,t[5]=i*e-l*n,t[6]=s*e-u*n,t[7]=x*e-M*n,t},mat4.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},mat4.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.fromRotation=function(t,a,r){var n,e,o,l=r[0],u=r[1],M=r[2],c=Math.sqrt(l*l+u*u+M*M);return Math.abs(c)<glMatrix.EPSILON?null:(c=1/c,l*=c,u*=c,M*=c,n=Math.sin(a),e=Math.cos(a),o=1-e,t[0]=l*l*o+e,t[1]=u*l*o+M*n,t[2]=M*l*o-u*n,t[3]=0,t[4]=l*u*o-M*n,t[5]=u*u*o+e,t[6]=M*u*o+l*n,t[7]=0,t[8]=l*M*o+u*n,t[9]=u*M*o-l*n,t[10]=M*M*o+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},mat4.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.fromRotationTranslation=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=n+n,M=e+e,c=o+o,i=n*u,s=n*M,x=n*c,m=e*M,v=e*c,D=o*c,S=l*u,I=l*M,f=l*c;return t[0]=1-(m+D),t[1]=s+f,t[2]=x-I,t[3]=0,t[4]=s-f,t[5]=1-(i+D),t[6]=v+S,t[7]=0,t[8]=x+I,t[9]=v-S,t[10]=1-(i+m),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},mat4.fromRotationTranslationScale=function(t,a,r,n){var e=a[0],o=a[1],l=a[2],u=a[3],M=e+e,c=o+o,i=l+l,s=e*M,x=e*c,m=e*i,v=o*c,D=o*i,S=l*i,I=u*M,f=u*c,F=u*i,h=n[0],d=n[1],z=n[2];return t[0]=(1-(v+S))*h,t[1]=(x+F)*h,t[2]=(m-f)*h,t[3]=0,t[4]=(x-F)*d,t[5]=(1-(s+S))*d,t[6]=(D+I)*d,t[7]=0,t[8]=(m+f)*z,t[9]=(D-I)*z,t[10]=(1-(s+v))*z,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},mat4.fromRotationTranslationScaleOrigin=function(t,a,r,n,e){var o=a[0],l=a[1],u=a[2],M=a[3],c=o+o,i=l+l,s=u+u,x=o*c,m=o*i,v=o*s,D=l*i,S=l*s,I=u*s,f=M*c,F=M*i,h=M*s,d=n[0],z=n[1],w=n[2],g=e[0],p=e[1],q=e[2];return t[0]=(1-(D+I))*d,t[1]=(m+h)*d,t[2]=(v-F)*d,t[3]=0,t[4]=(m-h)*z,t[5]=(1-(x+I))*z,t[6]=(S+f)*z,t[7]=0,t[8]=(v+F)*w,t[9]=(S-f)*w,t[10]=(1-(x+D))*w,t[11]=0,t[12]=r[0]+g-(t[0]*g+t[4]*p+t[8]*q),t[13]=r[1]+p-(t[1]*g+t[5]*p+t[9]*q),t[14]=r[2]+q-(t[2]*g+t[6]*p+t[10]*q),t[15]=1,t
},mat4.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,M=e+e,c=r*l,i=n*l,s=n*u,x=e*l,m=e*u,v=e*M,D=o*l,S=o*u,I=o*M;return t[0]=1-s-v,t[1]=i+I,t[2]=x-S,t[3]=0,t[4]=i-I,t[5]=1-c-v,t[6]=m+D,t[7]=0,t[8]=x+S,t[9]=m-D,t[10]=1-c-s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},mat4.frustum=function(t,a,r,n,e,o,l){var u=1/(r-a),M=1/(e-n),c=1/(o-l);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*M,t[6]=0,t[7]=0,t[8]=(r+a)*u,t[9]=(e+n)*M,t[10]=(l+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=l*o*2*c,t[15]=0,t},mat4.perspective=function(t,a,r,n,e){var o=1/Math.tan(a/2),l=1/(n-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*n*l,t[15]=0,t},mat4.perspectiveFromFieldOfView=function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180),u=Math.tan(a.rightDegrees*Math.PI/180),M=2/(l+u),c=2/(e+o);return t[0]=M,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((l-u)*M*.5),t[9]=(e-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},mat4.ortho=function(t,a,r,n,e,o,l){var u=1/(a-r),M=1/(n-e),c=1/(o-l);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*M,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(a+r)*u,t[13]=(e+n)*M,t[14]=(l+o)*c,t[15]=1,t},mat4.lookAt=function(t,a,r,n){var e,o,l,u,M,c,i,s,x,m,v=a[0],D=a[1],S=a[2],I=n[0],f=n[1],F=n[2],h=r[0],d=r[1],z=r[2];return Math.abs(v-h)<glMatrix.EPSILON&&Math.abs(D-d)<glMatrix.EPSILON&&Math.abs(S-z)<glMatrix.EPSILON?mat4.identity(t):(i=v-h,s=D-d,x=S-z,m=1/Math.sqrt(i*i+s*s+x*x),i*=m,s*=m,x*=m,e=f*x-F*s,o=F*i-I*x,l=I*s-f*i,m=Math.sqrt(e*e+o*o+l*l),m?(m=1/m,e*=m,o*=m,l*=m):(e=0,o=0,l=0),u=s*l-x*o,M=x*e-i*l,c=i*o-s*e,m=Math.sqrt(u*u+M*M+c*c),m?(m=1/m,u*=m,M*=m,c*=m):(u=0,M=0,c=0),t[0]=e,t[1]=u,t[2]=i,t[3]=0,t[4]=o,t[5]=M,t[6]=s,t[7]=0,t[8]=l,t[9]=c,t[10]=x,t[11]=0,t[12]=-(e*v+o*D+l*S),t[13]=-(u*v+M*D+c*S),t[14]=-(i*v+s*D+x*S),t[15]=1,t)},mat4.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},mat4.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var mat3={};mat3.create=function(){var t=new glMatrix.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},mat3.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},mat3.clone=function(t){var a=new glMatrix.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},mat3.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},mat3.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},mat3.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},mat3.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=a[6],c=a[7],i=a[8],s=i*l-u*c,x=-i*o+u*M,m=c*o-l*M,v=r*s+n*x+e*m;return v?(v=1/v,t[0]=s*v,t[1]=(-i*n+e*c)*v,t[2]=(u*n-e*l)*v,t[3]=x*v,t[4]=(i*r-e*M)*v,t[5]=(-u*r+e*o)*v,t[6]=m*v,t[7]=(-c*r+n*M)*v,t[8]=(l*r-n*o)*v,t):null},mat3.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=a[6],c=a[7],i=a[8];return t[0]=l*i-u*c,t[1]=e*c-n*i,t[2]=n*u-e*l,t[3]=u*M-o*i,t[4]=r*i-e*M,t[5]=e*o-r*u,t[6]=o*c-l*M,t[7]=n*M-r*c,t[8]=r*l-n*o,t},mat3.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],l=t[5],u=t[6],M=t[7],c=t[8];return a*(c*o-l*M)+r*(-c*e+l*u)+n*(M*e-o*u)},mat3.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=a[6],i=a[7],s=a[8],x=r[0],m=r[1],v=r[2],D=r[3],S=r[4],I=r[5],f=r[6],F=r[7],h=r[8];return t[0]=x*n+m*l+v*c,t[1]=x*e+m*u+v*i,t[2]=x*o+m*M+v*s,t[3]=D*n+S*l+I*c,t[4]=D*e+S*u+I*i,t[5]=D*o+S*M+I*s,t[6]=f*n+F*l+h*c,t[7]=f*e+F*u+h*i,t[8]=f*o+F*M+h*s,t},mat3.mul=mat3.multiply,mat3.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=a[6],i=a[7],s=a[8],x=r[0],m=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=l,t[4]=u,t[5]=M,t[6]=x*n+m*l+c,t[7]=x*e+m*u+i,t[8]=x*o+m*M+s,t},mat3.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=a[4],M=a[5],c=a[6],i=a[7],s=a[8],x=Math.sin(r),m=Math.cos(r);return t[0]=m*n+x*l,t[1]=m*e+x*u,t[2]=m*o+x*M,t[3]=m*l-x*n,t[4]=m*u-x*e,t[5]=m*M-x*o,t[6]=c,t[7]=i,t[8]=s,t},mat3.scale=function(t,a,r){var n=r[0],e=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},mat3.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},mat3.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},mat3.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},mat3.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},mat3.fromRows=function(t,a,r,n){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=r[0],t[4]=r[1],t[5]=r[2],t[6]=n[0],t[7]=n[1],t[8]=n[2],t},mat3.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r+r,u=n+n,M=e+e,c=r*l,i=n*l,s=n*u,x=e*l,m=e*u,v=e*M,D=o*l,S=o*u,I=o*M;return t[0]=1-s-v,t[3]=i-I,t[6]=x+S,t[1]=i+I,t[4]=1-c-v,t[7]=m-D,t[2]=x-S,t[5]=m+D,t[8]=1-c-s,t},mat3.normalFromMat4=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=a[4],u=a[5],M=a[6],c=a[7],i=a[8],s=a[9],x=a[10],m=a[11],v=a[12],D=a[13],S=a[14],I=a[15],f=r*u-n*l,F=r*M-e*l,h=r*c-o*l,d=n*M-e*u,z=n*c-o*u,w=e*c-o*M,g=i*D-s*v,p=i*S-x*v,q=i*I-m*v,A=s*S-x*D,R=s*I-m*D,b=x*I-m*S,Y=f*b-F*R+h*A+d*q-z*p+w*g;return Y?(Y=1/Y,t[0]=(u*b-M*R+c*A)*Y,t[1]=(M*q-l*b-c*p)*Y,t[2]=(l*R-u*q+c*g)*Y,t[3]=(e*R-n*b-o*A)*Y,t[4]=(r*b-e*q+o*p)*Y,t[5]=(n*q-r*R-o*g)*Y,t[6]=(D*w-S*z+I*d)*Y,t[7]=(S*h-v*w-I*F)*Y,t[8]=(v*z-D*h+I*f)*Y,t):null},mat3.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},mat3.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var quat={};quat.create=function(){var t=new glMatrix.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},quat.rotationTo=function(){var t=vec3.create(),a=vec3.fromValues(1,0,0),r=vec3.fromValues(0,1,0);return function(n,e,o){var l=vec3.dot(e,o);return-.999999>l?(vec3.cross(t,a,e),vec3.length(t)<1e-6&&vec3.cross(t,r,e),vec3.normalize(t,t),quat.setAxisAngle(n,t,Math.PI),n):l>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(vec3.cross(t,e,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+l,quat.normalize(n,n))}}(),quat.setAxes=function(){var t=mat3.create();return function(a,r,n,e){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],quat.normalize(a,quat.fromMat3(a,t))}}(),quat.clone=vec4.clone,quat.fromValues=vec4.fromValues,quat.copy=vec4.copy,quat.set=vec4.set,quat.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},quat.setAxisAngle=function(t,a,r){r=.5*r;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},quat.add=vec4.add,quat.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],l=a[3],u=r[0],M=r[1],c=r[2],i=r[3];return t[0]=n*i+l*u+e*c-o*M,t[1]=e*i+l*M+o*u-n*c,t[2]=o*i+l*c+n*M-e*u,t[3]=l*i-n*u-e*M-o*c,t},quat.mul=quat.multiply,quat.scale=vec4.scale,quat.rotateX=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),M=Math.cos(r);return t[0]=n*M+l*u,t[1]=e*M+o*u,t[2]=o*M-e*u,t[3]=l*M-n*u,t},quat.rotateY=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),M=Math.cos(r);return t[0]=n*M-o*u,t[1]=e*M+l*u,t[2]=o*M+n*u,t[3]=l*M-e*u,t},quat.rotateZ=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],l=a[3],u=Math.sin(r),M=Math.cos(r);return t[0]=n*M+e*u,t[1]=e*M-n*u,t[2]=o*M+l*u,t[3]=l*M-o*u,t},quat.calculateW=function(t,a){var r=a[0],n=a[1],e=a[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},quat.dot=vec4.dot,quat.lerp=vec4.lerp,quat.slerp=function(t,a,r,n){var e,o,l,u,M,c=a[0],i=a[1],s=a[2],x=a[3],m=r[0],v=r[1],D=r[2],S=r[3];return o=c*m+i*v+s*D+x*S,0>o&&(o=-o,m=-m,v=-v,D=-D,S=-S),1-o>1e-6?(e=Math.acos(o),l=Math.sin(e),u=Math.sin((1-n)*e)/l,M=Math.sin(n*e)/l):(u=1-n,M=n),t[0]=u*c+M*m,t[1]=u*i+M*v,t[2]=u*s+M*D,t[3]=u*x+M*S,t},quat.sqlerp=function(){var t=quat.create(),a=quat.create();return function(r,n,e,o,l,u){return quat.slerp(t,n,l,u),quat.slerp(a,e,o,u),quat.slerp(r,t,a,2*u*(1-u)),r}}(),quat.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],l=r*r+n*n+e*e+o*o,u=l?1/l:0;return t[0]=-r*u,t[1]=-n*u,t[2]=-e*u,t[3]=o*u,t},quat.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},quat.length=vec4.length,quat.len=quat.length,quat.squaredLength=vec4.squaredLength,quat.sqrLen=quat.squaredLength,quat.normalize=vec4.normalize,quat.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,l=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*l+l]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+l]-a[3*l+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[l]=(a[3*l+e]+a[3*e+l])*r}return t},quat.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};